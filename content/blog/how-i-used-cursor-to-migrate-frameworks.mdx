---
title: How I used Cursor to Migrate Frameworks
date: 2026-02-20
description:
  I upgraded kentcdodds.com from Remix v2 to React Router v7 in a day with over
  17k lines of code changed. Here's how I did it.
categories:
  - ai
meta:
  keywords:
    - ai
    - react router
    - cursor
    - agents
bannerCloudinaryId: unsplash/photo-1551983045-07983cc66cab
bannerAlt: Assorted-color item lot
bannerCredit: Photo by [Edgar
  Chaparro](https://unsplash.com/photos/assorted-color-item-lot-AAHxr7ZvCLs)
---

Yesterday I decided it was time to upgrade the dependencies on kentcdodds.com (the site you're probably reading this on). I've actually been working on my site a bit recently to add a few new features (have you tried the new semantic search or keyboard shortcuts yet try "How did Kent get his first job?" and hit <kbd>?</kbd> to see the keyboard shortcuts).

Just for context, kentcdodds.com is a pretty big project (currently sitting at over 42k lines of code with over 330k words of content). For a quick look at the scope of this thing, check out [introducing the new kentcdodds.com](/blog/introducing-the-new-kentcdodds.com) for a high-level overview.

I gave Cursor (Composer 1.5) the following prompt:

> Make me a list of packages in this project that are not on the latest version, grouped by difficulty of upgrading.

It gave me this table:

<div
	style={{
		backgroundColor: 'var(--bg-secondary)',
		border: '1px solid var(--border-secondary)',
		color: 'var(--text-primary)',
		padding: '1rem',
		borderRadius: '0.5rem',
	}}
>

Hereâ€™s the list of outdated packages, grouped by upgrade difficulty:

---

## Easy (patch/minor within same major)

Usually safe to upgrade with `npm update` or a small version bump.

| Package                        | Current | Latest  |
| ------------------------------ | ------- | ------- |
| @conform-to/react              | 1.16.0  | 1.17.1  |
| @conform-to/zod                | 1.16.0  | 1.17.1  |
| @epic-web/config               | 1.21.3  | 1.24.0  |
| @modelcontextprotocol/sdk      | 1.25.3  | 1.26.0  |
| @playwright/test               | 1.58.1  | 1.58.2  |
| @prisma/adapter-better-sqlite3 | 7.3.0   | 7.4.0   |
| @prisma/client                 | 7.3.0   | 7.4.0   |
| @tailwindcss/vite              | 4.1.18  | 4.2.0   |
| @types/react                   | 19.2.10 | 19.2.14 |
| esbuild                        | 0.27.2  | 0.27.3  |
| framer-motion                  | 12.29.2 | 12.34.2 |
| isbot                          | 5.1.34  | 5.1.35  |
| metascraper                    | 5.49.21 | 5.49.24 |
| metascraper-description        | 5.49.21 | 5.49.24 |
| metascraper-image              | 5.49.21 | 5.49.24 |
| metascraper-title              | 5.49.21 | 5.49.24 |
| msw                            | 2.12.7  | 2.12.10 |
| prisma                         | 7.3.0   | 7.4.0   |
| tailwindcss                    | 4.1.18  | 4.2.0   |
| vite-plugin-cjs-interop        | 2.4.0   | 2.4.1   |

**`oauth/` subpackage:**
| Package | Current | Latest |
|---------|---------|--------|
| @epic-web/config | 1.21.0 | 1.24.0 |
| prettier | 3.5.3 | 3.8.1 |
| wrangler | 4.19.1 | 4.67.0 |
| zod | 3.25.57 | 3.25.76 (within v3) |

---

## Medium (single major version bump)

One major version upgrade; check migration guides and changelogs.

| Package                    | Current | Latest  |
| -------------------------- | ------- | ------- |
| @faker-js/faker            | 8.4.1   | 10.3.0  |
| @octokit/plugin-throttling | 9.6.1   | 11.0.3  |
| @octokit/rest              | 20.1.2  | 22.0.1  |
| @sentry/profiling-node     | 9.47.1  | 10.39.0 |
| @sentry/remix              | 9.47.1  | 10.39.0 |
| @sentry/vite-plugin        | 3.6.1   | 4.9.1   |
| @sindresorhus/slugify      | 2.2.1   | 3.0.0   |
| @testing-library/react     | 15.0.7  | 16.3.2  |
| @types/uuid                | 9.0.8   | 10.0.0  |
| @vitejs/plugin-react       | 4.7.0   | 5.1.4   |
| bcrypt                     | 5.1.1   | 6.0.0   |
| chokidar                   | 3.6.0   | 5.0.0   |
| close-with-grace           | 1.3.0   | 2.4.0   |
| concurrently               | 8.2.2   | 9.2.1   |
| cookie                     | 0.7.2   | 1.1.1   |
| cross-env                  | 7.0.3   | 10.1.0  |
| date-fns                   | 3.6.0   | 4.1.0   |
| dotenv                     | 16.6.1  | 17.3.1  |
| eslint                     | 9.39.2  | 10.0.0  |
| express                    | 4.22.1  | 5.2.1   |
| glob                       | 10.5.0  | 13.0.5  |
| helmet                     | 7.2.0   | 8.1.0   |
| jest-environment-jsdom     | 29.7.0  | 30.2.0  |
| jest-watch-typeahead       | 2.2.2   | 3.0.1   |
| lru-cache                  | 10.4.3  | 11.2.6  |
| match-sorter               | 6.4.0   | 8.2.0   |
| p-limit                    | 5.0.0   | 7.3.0   |
| p-queue                    | 8.1.1   | 9.1.0   |
| path-to-regexp             | 6.3.0   | 8.3.0   |
| react-error-boundary       | 4.1.2   | 6.1.1   |
| react-lite-youtube-embed   | 2.4.0   | 3.5.0   |
| rimraf                     | 5.0.10  | 6.1.3   |
| uuid                       | 9.0.1   | 13.0.0  |
| vite-env-only              | 2.4.1   | 3.0.3   |
| vite-tsconfig-paths        | 4.3.2   | 6.1.1   |

**`oauth/` subpackage:**
| Package | Current | Latest |
|---------|---------|--------|
| @cloudflare/workers-oauth-provider | 0.0.5 | 0.2.3 |
| eslint | 9.28.0 | 10.0.0 |

---

## Hard (multiple majors or framework-critical)

Multiple major versions or core framework pieces; may need patches.

| Package                   | Current | Latest |
| ------------------------- | ------- | ------ |
| @remix-run/dev            | 2.9.2   | 2.17.4 |
| @remix-run/express        | 2.9.2   | 2.17.4 |
| @remix-run/node           | 2.9.2   | 2.17.4 |
| @remix-run/react          | 2.9.2   | 2.17.4 |
| @remix-run/router         | 1.16.1  | 1.23.2 |
| @remix-run/serve          | 2.9.2   | 2.17.4 |
| @remix-run/server-runtime | 2.9.2   | 2.17.4 |
| @types/node               | 24.10.9 | 25.3.0 |
| @xstate/react             | 3.2.2   | 6.0.0  |
| vitest                    | 1.6.1   | 4.0.18 |
| vite                      | 5.4.21  | 7.3.1  |
| xstate                    | 4.38.3  | 5.28.0 |
| zod                       | 3.25.76 | 4.3.6  |

**Remix:** There are patches in `other/patches/` for `@remix-run/react`, `@remix-run/router`, and `react-router-dom`. Upgrading Remix will likely require re-checking or re-applying these patches.

**Vite / Vitest:** Vite 5 â†’ 7 and Vitest 1 â†’ 4 are large jumps. Expect config and plugin changes.

**XState:** `xstate` 4 â†’ 5 and `@xstate/react` 3 â†’ 6 involve major API changes.

**Zod:** 3 â†’ 4 is a breaking change and affects many consumers (e.g. Conform, Remix).

---

**Summary:** 19 easy, 42 medium, 14 hard. Start with the easy group; for Remix, review the patches before upgrading.

</div>

A week or two ago I had Cursor update Tailwind from v3 to v4 (otherwise that would've showed up here too).

So next thing I did was fork the conversation and told it to update all the easy ones. That went without a hitch.

I then had it do the medium ones. This one did end up with a couple issues, but wasn't that bad. It handled most the breaking changes gracefully.

This only really works because I have some pretty good tests and documentation that I made when I was actively developing the project (with my bare hands, like some kind of caveman).

## Major changes

I decided to do the major changes one at a time. I had it run the vite (v5 -> v7) and vitest (v1 -> v4) upgrades together. That went without a hitch.

Feeling pretty good about this, I had it run the zod upgrade. I've done the zod v4 upgrade before (with the Epic Stack and other projects based on it) so I knew that conform had a special export for zod v4, so I said:

> Let's do zod now. Conform has a special export for zod 4 integration. Use that.

Everything was smooth.

Then I decided to make a new conversation and told it to upgrade xstate. I use xstate for [the Call Kent Podcast](/calls) in-browser recorder (my agent says there's about 200 lines of xstate related code in this project). So it's not a huge dep, but I remember when I originally wrote this and it was challenging.

I created a new conversation because it had told me that the @xstate/react v3 -> v6 upgrade was a major upgrade and I wanted to be sure to handle it carefully.

> Please update xstate and @xstate/react. Before doing this, look up migration docs and follow those.

It searched the web and found migration docs, planned the migration, and executed the plan to perfection.

## Double-Major changes

Ok, so first I have to say that migrating from Remix v2 to React Router v7 is not a true framework migration, but rather a dependency upgrade because Remix v2 was just a wrapper around React Router. In v7, the Remix team moved everything to React Router. They did the responsible thing by [making "future flags"](https://remix.run/blog/future-flags) so you could incrementally adopt new features to avoid a big bang upgrade.

I had enabled none of those future flags.

I knew this one would be a pretty big upgrade, so I decided to use [Cursor's new long-running background agent feature](https://www.cursor.com/blog/long-running-agents).

Here's the prompt I used:

> Upgrade us from Remix v2 to React Router v7. Before doing this, look up relevant migration docs/upgrade guides. We have some remix-specific dependencies as well. Make sure their latest versions work with React Router. If they don't, find alternatives.
>
> We have some patch files. These are to make it so we can add headers to remix fetchers and things. I don't think that feature will ever exist so I want you to delete those patch files and instead find an alternative solution (a simple fetch with a revalidation call should be sufficient, but double check my thinking on that).

It created a plan and I gave it a couple bits of feedback/answered some questions:

> - I want to use react-router-auto-routes, look up the docs for that. This will require moving files around a lot
> - REMIX_DEV_HTTP_ORIGIN is completely unnecessary in RR
>
> Manual fetch, the reason we do this is to skip the unnecessary buffering of the request body in a server that can't do anything with this data anyway

This was an interesting decision because before I was using `remix-flat-routes` for filesystem routing. `react-router-auto-routes` is what the Epic Stack uses now ([check the decision doc](https://github.com/epicweb-dev/epic-stack/blob/main/docs/decisions/045-rr-auto-routes.md)). Normally when upgrading a framework, you probably want to change as little as possible. But I figured the agent would figure it out. Living dangerously ðŸ˜Ž

Anyway, that was it. Then I sent it off to do its thing and it did an awesome job. However, it did struggle with the routing convention change (predictable ðŸ˜†).

So I sent this:

> you need to fix the way our file structure is so it makes routing work. Right now with the way we have things in this branch, here's what I get if I run `npx react-router routes`:
> ... routes output ...
> If I checkout main and run `npx remix routes` I get:
> ... routes output ...
> You need to fixup our directory structure to make react-router-auto-routes match our original routing structure as closely as possible. The order can be different, and the file paths will definitely be different, but the basic structure must be almost identical. Lookup the react-router-auto-routes (what we want and have in this branch) docs and compare it to the remix-flat-routes docs (what we have currently in main).

The next time I tried it out, the routing worked perfectly (give the agent a way to check its work and it performs much better!).

Then I noticed that the agent had tried to keep changes minimal and I decided we could be more amitious:

> Could you adopt the latest on how to handle types in Loaders, actions, components, etc based on the react router documentation? You can make a plan but don't wait for me to approve it. Just go for it. I'm going to sleep and want this all to be done when I wake. You got this!

Then I went to sleep. The agent kept running in the background for 21 minutes and finished that.

While I slept, it iterated a few times with Cursor BugBot. I have auto-fix enabled, so when BugBot finds issues, it automatically fires off an agent to fix the bug. It had managed things really well!

This morning, I pulled things down and played with stuff. It worked really well. Both BugBot and CodeRabbit had identified issues, so I kept the agents going to fix things as they were found. After a few more iterations, I merged it into main.

If you want to see the full migration diff, hereâ€™s the PR: [kentcdodds.com#658](https://github.com/kentcdodds/kentcdodds.com/pull/658).

https://x.com/kentcdodds/status/2024910293235892591

Just amazing!

## Thoughts

Life has gotten a little hectic lately:

https://x.com/kentcdodds/status/2024575351259877487

My laptop is constantly pinging me with notifications from Cursor local and email notifications from Cursor Cloud Agents. I'm normally an inbox 0 and close the browser tab when I'm done with it kind of person, but it's honestly hard to keep track of everything. I have emails coming in from github PRs and I have so many tabs open for cloud agents and github PRs. Not to mention the 5+ cursor editors I have open locally for different projects. I'm all over the place. It's crazy. I love it ðŸ˜‚

Someone asked me how many prompts I send a day which I thought was a funny question because I don't think about it. But I'm pretty sure I send hundreds of prompts daily (depends on what you count as a prompt, but I'm including follow-up messages in conversations). I don't know, I wouldn't be terribly surprised to find out I'd sent 1000 prompts. I mean, just in this site, just this morning I have 25 agents that I triggered myself. Some are bigger, some are smaller. And I've got other projects going. Things are happening!

I've never had so much fun building stuff. At the same time, we're walking dangerous territory:

https://x.com/kentcdodds/status/2024634031040839895

And

https://x.com/kentcdodds/status/2024645598310518958

Finding balance is hard when the next big problem to be solved is just one more prompt away.

Hope you enjoyed reading this! And seriously, try out the new semantic search feature of the site! It was fun to build and I plan on teaching how to build something like this in the future (among other things), so sign up for [my mailing list](https://www.epicweb.dev/newsletter)!

Cheers!
